<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CivicResolve AI</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <header class="navbar">
        <div class="container">
            <h1 class="logo">CivicResolve AI</h1>
            <div>
                <button id="admin-login-btn" class="btn btn-admin">Admin <i class="fas fa-user-shield"></i></button>
                <button id="login-btn" class="btn btn-primary">Login to Report <i class="fas fa-sign-in-alt"></i></button>
                <button id="logout-btn" class="btn btn-danger" style="display: none;">Logout <i class="fas fa-sign-out-alt"></i></button>
                <button id="admin-logout-btn" class="btn btn-danger" style="display: none;">Admin Logout <i class="fas fa-sign-out-alt"></i></button>
            </div>
        </div>
    </header>

    <main class="container">
        <section class="hero" id="hero-section">
            <h1><span class="highlight">See an Issue?</span> Report It!</h1>
            <p>AI-powered reporting to fix civic problems faster.</p>
        </section>

        <section class="impact" id="impact-section">
            <h2>Our Impact</h2>
            <div class="stats">
                <div class="stat-card">
                    <h3>10,000+</h3>
                    <p>Issues Reported</p>
                </div>
                <div class="stat-card">
                    <h3>7,000</h3>
                    <p>Issues Resolved</p>
                </div>
                <div class="stat-card">
                    <h3>70%</h3>
                    <p>Resolution Rate</p>
                </div>
            </div>
        </section>

        <!-- User Report Form Section -->
        <section id="report-form-section" class="report-form-container" style="display: none;">
            <h2><i class="fas fa-camera"></i> Report a New Issue</h2>
            <form id="report-form">
                <div class="form-group">
                    <label for="image-upload">Upload Photo of Issue <i class="fas fa-upload"></i></label>
                    <input type="file" id="image-upload" name="image-upload" accept="image/*" required>
                    <p id="file-name" class="file-info"></p>
                </div>
                <div class="form-group">
                    <label>AI-Detected Category</label>
                    <input type="text" id="ai-category" placeholder="Detecting category..." readonly>
                </div>
                <div class="form-group">
                    <label>AI-Generated Description</label>
                    <textarea id="ai-description" rows="4" placeholder="Analyzing image..." readonly></textarea>
                </div>
                <div id="location-info" class="location-info"><i class="fas fa-map-marker-alt"></i> Fetching location...</div>
                <button type="submit" id="submit-report-btn" class="btn btn-submit" disabled>
                    Submit Report <i class="fas fa-paper-plane"></i>
                </button>
                <p id="form-error" class="error"></p>
            </form>
        </section>

        <!-- Admin Dashboard Section -->
        <section id="admin-panel" class="report-form-container" style="display: none;">
            <div class="admin-header">
                <h2><i class="fas fa-user-shield"></i> Admin Dashboard</h2>
                <div class="admin-stats">
                    <div class="admin-stat">
                        <span class="stat-number" id="total-reports">0</span>
                        <span class="stat-label">Total Reports</span>
                    </div>
                    <div class="admin-stat">
                        <span class="stat-number" id="pending-reports">0</span>
                        <span class="stat-label">Pending</span>
                    </div>
                    <div class="admin-stat">
                        <span class="stat-number" id="resolved-reports">0</span>
                        <span class="stat-label">Resolved</span>
                    </div>
                </div>
            </div>
            
            <div class="admin-controls">
                <button id="refresh-reports" class="btn btn-primary">
                    <i class="fas fa-sync-alt"></i> Refresh Reports
                </button>
                <select id="status-filter" class="admin-filter">
                    <option value="all">All Reports</option>
                    <option value="pending">Pending</option>
                    <option value="in-progress">In Progress</option>
                    <option value="resolved">Resolved</option>
                </select>
                <select id="category-filter" class="admin-filter">
                    <option value="all">All Categories</option>
                    <option value="Pothole">Potholes</option>
                    <option value="Garbage Dump">Garbage</option>
                    <option value="Water Leak">Water Issues</option>
                    <option value="Fallen Tree">Vegetation</option>
                </select>
            </div>

            <div id="complaints-list" class="complaints-container">
                <div class="loading-placeholder">
                    <i class="fas fa-spinner fa-spin"></i> Loading reports...
                </div>
            </div>
        </section>

        <!-- Leaderboard Section -->
        <section class="leaderboard-section" id="leaderboard-section">
            <h2><i class="fas fa-trophy"></i> Top Citizens Leaderboard</h2>
            <div class="leaderboard-stats">
                <div class="leader-stat">
                    <h3>2,847</h3>
                    <p>Total Contributors</p>
                </div>
                <div class="leader-stat">
                    <h3>156</h3>
                    <p>Issues This Week</p>
                </div>
                <div class="leader-stat">
                    <h3>89%</h3>
                    <p>Accuracy Rate</p>
                </div>
            </div>
            <div class="leaderboard-container">
                <div class="leaderboard-header">
                    <div class="rank-col">Rank</div>
                    <div class="name-col">Citizen</div>
                    <div class="reports-col">Reports</div>
                    <div class="points-col">Points</div>
                    <div class="badge-col">Badge</div>
                </div>
                <div id="leaderboard-list" class="leaderboard-list">
                    <!-- Leaderboard entries will be populated by JavaScript -->
                </div>
            </div>
        </section>
    </main>

    <!-- User Login Modal -->
    <div id="login-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <div class="auth-tabs">
                <button id="show-login-tab" class="auth-tab active">Login</button>
                <button id="show-register-tab" class="auth-tab">Register</button>
            </div>
            <form id="login-form">
                <h2>Login to Your Account</h2>
                <input type="email" id="login-email" placeholder="Email Address" required>
                <input type="password" id="login-password" placeholder="Password" required>
                <button type="submit" class="btn btn-primary">Login <i class="fas fa-sign-in-alt"></i></button>
                <p id="login-error" class="error"></p>
            </form>
            <form id="register-form" style="display: none;">
                <h2>Create a New Account</h2>
                <input type="text" id="register-name" placeholder="Your Name" required>
                <input type="email" id="register-email" placeholder="Email Address" required>
                <input type="password" id="register-password" placeholder="Create Password" required>
                <button type="submit" class="btn btn-success">Register <i class="fas fa-user-plus"></i></button>
                <p id="register-error" class="error"></p>
            </form>
        </div>
    </div>

    <!-- Admin Authentication Modal -->
    <div id="admin-auth-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <div class="auth-tabs">
                <button id="show-admin-login-tab" class="auth-tab active">Admin Login</button>
                <button id="show-admin-register-tab" class="auth-tab">Admin Register</button>
            </div>
            <form id="admin-login-form">
                <h2><i class="fas fa-user-shield"></i> Admin Login</h2>
                <input type="email" id="admin-login-email" placeholder="Admin Email" required>
                <input type="password" id="admin-login-password" placeholder="Admin Password" required>
                <button type="submit" class="btn btn-admin">Admin Login</button>
                <p id="admin-login-error" class="error"></p>
            </form>
            <form id="admin-register-form" style="display: none;">
                <h2><i class="fas fa-user-shield"></i> Create Admin Account</h2>
                <input type="text" id="admin-register-name" placeholder="Admin Name" required>
                <input type="email" id="admin-register-email" placeholder="Admin Email" required>
                <input type="password" id="admin-register-password" placeholder="Create Password" required>
                <input type="text" id="admin-code" placeholder="Admin Access Code" required>
                <button type="submit" class="btn btn-admin">Create Admin Account</button>
                <p id="admin-register-error" class="error"></p>
            </form>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="script.js"></script>
</body>
</html>